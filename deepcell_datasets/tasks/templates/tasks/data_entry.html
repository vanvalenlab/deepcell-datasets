{% extends "base.html" %}

{% from "macros/_forms.html" import render_field %}

{% block content %}
<h3 class="title center-align">Task Information</h3>

<form method="post">


<!--
  {{  form.csrf_token  }}
-->

<!-- TODO: It would be nice to use a macro to render all these
-->

  <legend><h5>Please fill out the following:</h5></legend>

  {% if form.errors %}
    <ul class="errors">
      {% for field_name, field_errors in form.errors|dictsort if field_errors %}
        {% for error in field_errors %}
          <li>{{ form[field_name].label }}: {{ error }}</li>
        {% endfor %}
      {% endfor %}
    </ul>
  {% endif %}


  <div class="row">
    <div class="input-field col s12">
      <input disabled value={{ ann_id }} id="annotation" type="text">
      <label for="annotation">Annotation ID</label>
    </div>
  </div>

  <div class="row">
    <div class="col s12">
      <span class="helper-text" data-error="wrong" data-success="right">Describe which platform will be used:</span>
    </div>
    <div class="radio col s6">
      {% for choice in form.platform.choices %}
      <p>
        <label for="{{ choice }}">
          {% if loop.index == 1 %}
          <input id="{{ choice }}" name="platform" type="radio" value="{{ choice }}" checked />
          {% else %}
          <input id="{{ choice }}" name="platform" type="radio" value="{{ choice }}" />
          {% endif %}
          <span>{{ choice|title }}</span>
        </label>
      </p>
      {% endfor %}
    </div>
  </div>

  <div class="row">
    <div class="input-field col s6">
      <input class="datepicker" id="date_submitted" name="date_submitted" type="text">
      <label for="date_submitted">Date Submitted</label>
    </div>
    <div class="input-field col s6">
      <input class="datepicker" id="date_completed" name="date_completed" type="text">
      <label for="date_completed">Date Completed</label>
    </div>
  </div>

  <div class="row">
    <div class="input-field col s12">
      {{ render_field(form.project_ids) }}
      <span class="helper-text" data-error="wrong" data-success="right">List the Project ID(s) associated with the task.</span>
    </div>
  </div>
  <div class="row">
    <div class="input-field col s12">
      {{ render_field(form.cloud_storage_loc) }}
      <span class="helper-text" data-error="wrong" data-success="right">Provide a link to the bucket.</span>
    </div>
  </div>
  <div class="row">
    <div class="input-field col s12">
      {{ render_field(form.nas_filepath) }}
      <span class="helper-text" data-error="wrong" data-success="right">Where is the task located on disk?</span>
    </div>
  </div>

  <div class="row">
    <div class="input-field col s6">
      {{ render_field(form.coordinate_x) }}
    </div>
    <div class="input-field col s6">
      {{ render_field(form.coordinate_y) }}
    </div>
  </div>
  <div class="row">
    <div class="input-field col s6">
      {{ render_field(form.coordinate_z) }}
    </div>
    <div class="input-field col s6">
      {{ render_field(form.coordinate_t) }}
    </div>
  </div>

  <div class="row">
    <div class="col s12">
      <span class="helper-text" data-error="wrong" data-success="right">Define the dimensions of the task.</span>
    </div>
    <div class="input-field col s3">
      {{ render_field(form.dimensions.x) }}
    </div>
    <div class="input-field col s3">
      {{ render_field(form.dimensions.y) }}
    </div>
    <div class="input-field col s3">
      {{ render_field(form.dimensions.z) }}
    </div>
    <div class="input-field col s3">
      {{ render_field(form.dimensions.t) }}
    </div>
  </div>

  <!---
  TODO: The following boolean fields are not being rendered correctly.
  These should be radio buttons
  -->

  <div class="row">
    <div class="input-field col s3">
      {{ render_field(form.curated) }}
    </div>
    <div class="input-field col s3">
      {{ render_field(form.annotated) }}
    </div>
    <div class="input-field col s3">
      {{ render_field(form.queued) }}
    </div>
  </div>


  <button type="submit" class="btn btn-primary">Add Task</button>

</form>
{% endblock %}
